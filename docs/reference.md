<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [normalizePolicyDates][1]
    -   [Parameters][2]
-   [createFeeSchedule][3]
    -   [Parameters][4]
-   [reduceFeeSchedule][5]
    -   [Parameters][6]
-   [computeCancellationFees][7]
    -   [Parameters][8]
-   [computeDailyPrice][9]
    -   [Parameters][10]
-   [computeStayPrices][11]
    -   [Parameters][12]
-   [computePrices][13]
    -   [Parameters][14]
-   [selectApplicableModifiers][15]
    -   [Parameters][16]
-   [selectBestGuestModifier][17]
    -   [Parameters][18]
-   [selectApplicableRatePlans][19]
    -   [Parameters][20]

## normalizePolicyDates

Sorts out real dates for cancellation policies by applying
deadline where possible.

### Parameters

-   `bookingDateDayjs` **dayjs** is used to determine how far in the
    future will the actual stay happen.
-   `arrivalDayjs` **dayjs** is a date of arrival
-   `cancellationPolicies` **[Array][21]&lt;[Object][22]>** List of all declared
    policies

Returns **[Array][21]&lt;[object][22]>** Normalized list of policies where each
record contains from, to, and an appropriate amount.

## createFeeSchedule

Determines the most benefitial cancellation fee for a hotel
for every day between `bookingDateDayjs` and `arrivalDayjs`
(inclusive on both sides).

### Parameters

-   `bookingDateDayjs` **dayjs** is used to determine where to start.
-   `arrivalDayjs` **dayjs** is a date of arrival
-   `normalizedCancellationPolicies` **[Array][21]&lt;[Object][22]>** result of
    `normalizePolicyDates`
-   `defaultCancellationAmount` **[Number][23]** a default that is used
    in case there is no special policy applicable to any given date.

Returns **[Array][21]&lt;[Object][22]>** A list of fees best for a hotel. Items
contain an object containing dateDayjs and amount and are ordered
by date in an ascending order.

## reduceFeeSchedule

Compacts a fee schedule into continuous intervals
with the same amount.

### Parameters

-   `orderedSchedule`  
-   `feeSchedule` **[Array][21]&lt;[Object][22]>** ordered result of createFeeSchedule

Returns **[Array][21]&lt;[Object][22]>** List of periods, each containing from,
to and amount.

## computeCancellationFees

Determines the cancellation fees for any given arrival date
in the future.

### Parameters

-   `bookingDate` **any** anything parseable by dayjs marking
    a date on which the booking is happening
-   `arrivalDate` **any** anything parseable by dayjs marking
    a date on which the consumer will arrive
-   `cancellationPolicies` **[Array][21]&lt;[Object][22]>** list of policies as defined
    in [https://github.com/windingtree/wiki/blob/d64397e5fb6e439f8436ed856f60664d08ae9b48/hotel-data-swagger.yaml#L129][24]
-   `defaultCancellationAmount` **[Number][23]** fallback amount as defined in
    [https://github.com/windingtree/wiki/blob/d64397e5fb6e439f8436ed856f60664d08ae9b48/hotel-data-swagger.yaml#L124][25]

Returns **[Array][21]&lt;[Object][22]>** Result of `reduceFeeSchedule`

## computeDailyPrice

Determines a price for all of the guests for a single day
by using the selected rate plan and applying appropriate
modifier for every guest.

### Parameters

-   `guests` **[Array][21]&lt;[Object][22]>** list of information about guests,
    right now only the `age` field is expected
-   `lengthOfStay` **[Number][23]** 
-   `dateDayjs` **dayjs** 
-   `ratePlan` **[Object][22]** 

Returns **currencyjs** Total amount for all of the guests

## computeStayPrices

Computes a best price for the whole stay for all
of the guests in every possible currency. To report
a price, rate plans in every currency have to cover
the whole period between `arrivalDateDayjs` and
`departureDateDayjs`.

### Parameters

-   `arrivalDateDayjs` **dayjs** 
-   `departureDateDayjs` **dayjs** 
-   `guests` **[Array][21]&lt;[Object][22]>** list of information about guests,
    right now only the `age` field is expected
-   `hotelCurrency` **[string][26]** default hotel currency
-   `applicableRatePlans` **[Array][21]&lt;[object][22]>** list of possible rate plans

Returns **[Object][22]** For every currency a record exists in this map. The value
is an array of currencyjs instances that denote the best price
for all guests for a single day.

## computePrices

Computes the best prices for all room types
for given period of time and a party of guests.

### Parameters

-   `bookingDate` **mixed** anything parseable by dayjs
-   `arrivalDate` **mixed** anything parseable by dayjs
-   `departureDate` **mixed** anything parseable by dayjs
-   `guests` **[Array][21]&lt;[Object][22]>** List of information about guests
-   `roomTypes` **[Array][21]&lt;[Object][22]>** List of room types as defined
    in [https://github.com/windingtree/wiki/blob/d64397e5fb6e439f8436ed856f60664d08ae9b48/hotel-data-swagger.yaml#L136][27]
-   `ratePlans` **[Array][21]&lt;[Object][22]>** List of rate plans as defined in
    [https://github.com/windingtree/wiki/blob/d64397e5fb6e439f8436ed856f60664d08ae9b48/hotel-data-swagger.yaml#L212][28]
-   `fallbackCurrency` **[string][26]** currency used when a rate plan has
    no currency specified
-   `preferredCurrency` **[string][26]** you can limit the results only
    to this currency (optional, default `null`)

Returns **[Array][21]** List of prices for every room type. Every item in
the array contains an id (roomTypeId) and a list of `prices` for all
applicable currencies such as this. The total sum is an instance
of currencyjs. In case of no applicable rate plans, the prices array
is empty.    [
      {
        "id": "single-bed",
        "prices": [
          {
            "currency": "EUR",
            "total": 123.12
          },
          {
            "currency": "USD",
            "total": 130
          }
        ]
      }
    ]

## selectApplicableModifiers

Picks rate plans modifiers applicable under given conditions.

### Parameters

-   `modifiers` **[Array][21]&lt;[Object][22]>** List of rate plan modifiers as
    defined in [https://github.com/windingtree/wiki/blob/d64397e5fb6e439f8436ed856f60664d08ae9b48/hotel-data-swagger.yaml#L296][29]
-   `dateDayjs` **dayjs** A date for which we want to apply modifiers
-   `lengthOfStay` **[Number][23]** 
-   `numberOfGuests` **[Number][23]** 

Returns **[Array][21]&lt;[Object][22]>** List of modifiers that can be applied

## selectBestGuestModifier

Selects a modifier that is most in favour of a guest
with given age. If no age based modifier is applicable,
the best one from non-specific modifiers is used.

### Parameters

-   `modifiers` **[Array][21]&lt;[Object][22]>** List of rate plan modifiers as
    defined in [https://github.com/windingtree/wiki/blob/d64397e5fb6e439f8436ed856f60664d08ae9b48/hotel-data-swagger.yaml#L296][29]
-   `age` **[Number][23]** Guest's age

Returns **[Object][22]** The modifier with the best rate in
favour of a guest.

## selectApplicableRatePlans

Filters out rate plans that cannot be used under
given conditions.

### Parameters

-   `roomTypeId` **[string][26]** 
-   `ratePlans` **[Array][21]&lt;[Object][22]>** list of rate plans as defined in
    [https://github.com/windingtree/wiki/blob/d64397e5fb6e439f8436ed856f60664d08ae9b48/hotel-data-swagger.yaml#L212][28]
-   `bookingDateDayjs` **dayjs** 
-   `arrivalDateDayjs` **dayjs** 
-   `departureDateDayjs` **dayjs** 
-   `fallbackCurrency` **[string][26]** used when rate plans does not have
    a currency defined
-   `preferredCurrency` **([string][26] | null | [undefined][30])** You can limit the results to
    this single currency for faster processing (optional, default `null`)

Returns **[Array][21]&lt;[Object][22]>** List of usable rate plans.

[1]: #normalizepolicydates

[2]: #parameters

[3]: #createfeeschedule

[4]: #parameters-1

[5]: #reducefeeschedule

[6]: #parameters-2

[7]: #computecancellationfees

[8]: #parameters-3

[9]: #computedailyprice

[10]: #parameters-4

[11]: #computestayprices

[12]: #parameters-5

[13]: #computeprices

[14]: #parameters-6

[15]: #selectapplicablemodifiers

[16]: #parameters-7

[17]: #selectbestguestmodifier

[18]: #parameters-8

[19]: #selectapplicablerateplans

[20]: #parameters-9

[21]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[22]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[23]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[24]: https://github.com/windingtree/wiki/blob/d64397e5fb6e439f8436ed856f60664d08ae9b48/hotel-data-swagger.yaml#L129

[25]: https://github.com/windingtree/wiki/blob/d64397e5fb6e439f8436ed856f60664d08ae9b48/hotel-data-swagger.yaml#L124

[26]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[27]: https://github.com/windingtree/wiki/blob/d64397e5fb6e439f8436ed856f60664d08ae9b48/hotel-data-swagger.yaml#L136

[28]: https://github.com/windingtree/wiki/blob/d64397e5fb6e439f8436ed856f60664d08ae9b48/hotel-data-swagger.yaml#L212

[29]: https://github.com/windingtree/wiki/blob/d64397e5fb6e439f8436ed856f60664d08ae9b48/hotel-data-swagger.yaml#L296

[30]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined
